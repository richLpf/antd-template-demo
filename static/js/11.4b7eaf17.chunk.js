(this["webpackJsonpantd-template-project"]=this["webpackJsonpantd-template-project"]||[]).push([[11],{444:function(e,t,a){"use strict";a(183);var n=a(112),r=(a(469),a(489)),c=(a(419),a(422)),i=(a(186),a(80)),o=(a(253),a(190)),s=(a(98),a(44)),u=(a(249),a(114)),l=(a(250),a(113)),d=a(157),j=a.n(d),b=a(185),f=a(54),O=a(30),g=(a(251),a(159)),p=a(0),v=a(136),h=a(792),m=a(793),x=a(394);function S(){return(S=Object(b.a)(j.a.mark((function e(t){var n,r,c,i,o,s,u,l,d,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fields,r=void 0===n?[]:n,c=t.dataSource,i=void 0===c?[]:c,o=t.filename,s=void 0===o?"download":o,u=function(e){try{var t=new Blob([e,{type:"text/csv"}]),a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=s,n.click(),window.URL.revokeObjectURL(a)}catch(r){console.error(r)}},e.prev=2,e.next=5,a.e(19).then(a.t.bind(null,784,7));case 5:l=e.sent,d=l.Parser,b=new d({fields:r,withBOM:!0}).parse(i),u(b),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var y=function(e){return S.apply(this,arguments)},k=a(22);function P(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(a){return t}}var w=a(4),z=g.a.Group,N=Object(p.forwardRef)((function(e,t){var a=e.columns,d=e.storeKey,g=e.dataSource,S=e.rowKey,N=e.query,C=e.leftAction,E=e.download,R=e.filterParams,I=e.size,A=e.useBackendPagination,_=e.useBackendSearch,D=e.useReloadButton,T=e.useSearchInput,F=E||{},L=F.limit,B=F.exportData,J=F.exportQuery,K=Object(p.useState)(g||[]),U=Object(O.a)(K,2),q=U[0],H=U[1],G=Object(p.useState)(0),W=Object(O.a)(G,2),M=W[0],V=W[1],Q=Object(p.useState)(!1),Y=Object(O.a)(Q,2),X=Y[0],Z=Y[1],$=Object(p.useState)(!1),ee=Object(O.a)($,2),te=ee[0],ae=ee[1],ne=Object(p.useState)([]),re=Object(O.a)(ne,2),ce=re[0],ie=re[1],oe=Object(p.useState)(void 0),se=Object(O.a)(oe,2),ue=se[0],le=se[1],de=Object(p.useState)({Page:1,PageSize:10}),je=Object(O.a)(de,2),be=je[0],fe=je[1];Object(p.useEffect)((function(){Oe(Object(f.a)({},ge()))}),[]);var Oe=Object(p.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchData",t),Z(!0),e.abrupt("return",N&&N(t).then((function(e){var t=e||{},a=t.Data,n=t.Total;return H(a||[]),V(n||0),Z(!1),a})).catch((function(e){return Z(!1),e})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]);Object(p.useEffect)((function(){var e=a,t=P(d);ie(t?a.filter((function(e){return(t||[]).includes(e.key)})):e)}),[a]),Object(p.useImperativeHandle)(t,(function(){return{fetchData:function(){return Oe(Object(f.a)({},ge()))},data:q}}),[q,Oe]);var ge=Object(p.useCallback)((function(e){var t,a,n=be.Page,r=be.PageSize,c=be.FuzzySearch;return Object(f.a)({},A?Object(f.a)(Object(f.a)({Page:(null===e||void 0===e?void 0:e.Page)||n,PageSize:(null===e||void 0===e?void 0:e.PageSize)||r,FuzzySearch:(null===e||void 0===e?void 0:e.FuzzySearch)||c,sortField:null===e||void 0===e||null===(t=e.sorter)||void 0===t?void 0:t.field,sortOrder:null===e||void 0===e||null===(a=e.sorter)||void 0===a?void 0:a.order},(null===e||void 0===e?void 0:e.filters)?e.filters:{}),R):Object(f.a)({Page:1,PageSize:9999999},R))}),[R,be,A]);Object(p.useEffect)((function(){console.log(he.current),he.current(be.Page,be.PageSize||10,A)}),[R]);var pe=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=q,!A){e.next=8;break}return ae(!0),a=J?J(Object(f.a)({},ge())):N(Object(f.a)(Object(f.a)({},ge()),{},{Page:1},L?{PageSize:L}:{})),e.next=6,a.then((function(e){return e.Data})).catch((function(e){return ae(!1),l.b.error(String(e)),null}));case 6:t=e.sent,ae(!1);case 8:Array.isArray(t)&&t.length&&(n=B(t),r=n.data,c=n.fields,y({fields:c,dataSource:r,filename:"list.csv"}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=Object(p.useCallback)((function(e,t,a){fe(Object(f.a)(Object(f.a)({},a),{},{Page:e,PageSize:t})),A&&Oe({FuzzySearch:ue,Page:e,PageSize:t})}),[]),he=Object(p.useRef)(Object(k.g)((function(e,t,a){fe({Page:e,PageSize:t}),a&&Oe({FuzzySearch:ue,Page:e,PageSize:t})}),1e3)),me=function(){if(_){he.current(1,be.PageSize||10,A)}},xe=Object(p.useCallback)((function(){return Object(f.a)(Object(f.a)({dataSource:A&&_?q:null===q||void 0===q?void 0:q.filter((function(e){return!ue||Object.keys(e).some((function(t){return typeof e[t]!==Object&&String(e[t]).includes(ue)}))}))},A?{pagination:{current:be.Page,pageSize:be.PageSize,total:M,onChange:function(e,t){return ve(e,t,be)}}}:{}),{},{scroll:{x:!0}})}),[q,ue,M,A,_,be,ve]),Se=Object(w.jsx)(z,{style:{width:150},options:a.map((function(e){return{label:e.title,value:e.key}})),value:ce.map((function(e){return e.key})),onChange:function(e){var t=a.filter((function(t){return e.includes(t.key)}));ie(t),d&&function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(a){console.log(a.message)}}(d,t.map((function(e){return e.key})))}}),ye=Object(w.jsxs)(c.b,{children:[T?Object(w.jsx)(u.a,{size:I,suffix:Object(w.jsx)(v.a,{onClick:me}),value:ue,onChange:function(e){return le(e.target.value)},placeholder:"search...",onPressEnter:me}):null,E&&Object(w.jsx)(s.a,{size:I,loading:te,onClick:pe,icon:Object(w.jsx)(h.a,{})}),D?Object(w.jsx)(s.a,{size:I,onClick:function(){return Oe(Object(f.a)({},ge()))},icon:Object(w.jsx)(m.a,{})}):null,d&&Object(w.jsx)(i.a,{placement:"top",title:"\u81ea\u5b9a\u4e49\u5217\u8868",children:Object(w.jsx)(o.a,{placement:"left",title:"\u81ea\u5b9a\u4e49\u5217\u8868",content:Se,trigger:"click",children:Object(w.jsx)(s.a,{size:I,icon:Object(w.jsx)(x.a,{})})})},"ColumnsSetting")]});return Object(w.jsx)(n.a,{size:I,title:C,extra:ye,children:Object(w.jsx)(r.a,Object(f.a)({size:I,columns:ce,rowKey:S,loading:X,bordered:!0,onChange:function(e,t,a){console.log(a),Oe(Object(f.a)({},ge({pagination:e,filters:t,sorter:a})))}},xe()))})}));N.defaultProps={usePagination:!1,size:"middle",useBackendSearch:!1},N.displayName="UTable";t.a=N},446:function(e,t,a){"use strict";a(250);var n=a(113),r=a(498),c=a.n(r),i={};i.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/antd-template-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENV:"production"}).REACT_APP_API;var o="user",s="123456";t.a=function(e){return new Promise((function(t,a){var r=c.a.create(Object.assign({withCredentials:!1,"content-type":"application/json",timeout:3e4},i));r.interceptors.request.use((function(e){return s&&(e.headers.token=s),o&&(e.headers.remote_user=o),e}),(function(e){return a(e)})),r.interceptors.response.use((function(e){return e}),(function(e){return a(e.message)})),r(e).then((function(e){var a=e.data,r=a.RetCode,c=a.Message,i=e.data;if(1e4===r)return n.b.error("\u8bf7\u767b\u9646"),void window.location.replace("/login");0!==r?(n.b.error(c),t(i)):t(i)})).catch((function(e){a(e)}))}))}},785:function(e,t,a){"use strict";a.r(t);a(256);var n=a(165),r=a(0),c=a(54),i=(a(419),a(422)),o=(a(98),a(44)),s=a(30),u=a(444),l=a(446),d=function(e){return Object(l.a)({url:"/v1/list",method:"get",query:e})},j=a(4);var b=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],l=Object(r.useRef)();Object(r.useEffect)((function(){f({id:1})}),[]),document.title="test";var b=[{title:"\u59d3\u540d\u540d\u5b57\u540d\u5b57\u540d",dataIndex:"name",key:"name"},{title:"\u5e74\u9f84",dataIndex:"age",key:"age",sorter:!0,render:function(e){return"".concat(e,"\u5c81")}},{title:"\u4f4f\u5740",dataIndex:"address",key:"address"}],f=function(e){d(e).then((function(e){var t=JSON.parse(JSON.stringify(e)).Data;n(t)}))},O=Object(j.jsx)(i.b,{children:Object(j.jsx)(o.a,{type:"primary",onClick:function(){l.current.fetchData();var e=l.current.data;console.log("result",e)},children:"\u6dfb\u52a0"})});return Object(j.jsx)(r.Fragment,{children:Object(j.jsx)(u.a,{ref:l,rowKey:"key",storeKey:"base-table",download:{limit:1e4,exportData:function(e){return{fields:b.filter((function(e){return"actions"!==e.key})).map((function(e){return{label:e.title,value:e.key}})),data:e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{age:"".concat(e.age,"\u5c81")})}))}}},leftAction:O,query:d,dataSource:a,columns:b})})},f=(a(447),a(467)),O=(a(469),a(489));var g=function(){var e=O.a.Column,t=O.a.ColumnGroup;return Object(j.jsxs)(O.a,{dataSource:[{key:"1",firstName:"John",lastName:"Brown",age:32,address:"New York No. 1 Lake Park",tags:["nice","developer"]},{key:"2",firstName:"Jim",lastName:"Green",age:42,address:"London No. 1 Lake Park",tags:["loser"]},{key:"3",firstName:"Joe",lastName:"Black",age:32,address:"Sidney No. 1 Lake Park",tags:["cool","teacher"]}],children:[Object(j.jsxs)(t,{title:"Name",children:[Object(j.jsx)(e,{title:"First Name",dataIndex:"firstName"},"firstName"),Object(j.jsx)(e,{title:"Last Name",dataIndex:"lastName"},"lastName")]}),Object(j.jsx)(e,{title:"Age",dataIndex:"age"},"age"),Object(j.jsx)(e,{title:"Address",dataIndex:"address"},"address"),Object(j.jsx)(e,{title:"Tags",dataIndex:"tags",render:function(e){return Object(j.jsx)(j.Fragment,{children:e.map((function(e){return Object(j.jsx)(f.a,{color:"blue",children:e},e)}))})}},"tags"),Object(j.jsx)(e,{title:"Action",render:function(e,t){return Object(j.jsxs)(i.b,{size:"middle",children:[Object(j.jsxs)(o.a,{type:"link",children:["Invite ",t.lastName]}),Object(j.jsx)(o.a,{type:"link",children:"Delete"})]})}},"action")]})},p=n.a.TabPane;t.default=function(){return Object(j.jsx)(r.Fragment,{children:Object(j.jsxs)(n.a,{children:[Object(j.jsx)(p,{tab:"\u5c01\u88c5\u8868\u683c",children:Object(j.jsx)(b,{})},1),Object(j.jsx)(p,{tab:"\u57fa\u7840\u8868\u683c",children:Object(j.jsx)(b,{})},2),Object(j.jsx)(p,{tab:"\u6eda\u52a8\u8868\u683c",children:Object(j.jsx)(g,{})},3)]})})}}}]);
//# sourceMappingURL=11.4b7eaf17.chunk.js.map