{"version":3,"sources":["pages/system/Resource/Columns.js","pages/system/Resource/FormItem.js","pages/system/Resource/Filter.js","pages/system/Resource/index.js"],"names":["Columns","handleEdit","handleDelete","title","dataIndex","key","render","val","formatTime","record","type","size","onClick","onConfirm","okText","cancelText","danger","filterInitialValues","Filter","label","span","Resource","useState","visible","setVisible","confirmLoading","setConfirmLoading","initialValues","setInitialValues","isNew","setIsNew","tableRef","useRef","useEffect","className","TableFilter","onSearch","fields","rowCount","defaultValue","UTable","rowKey","ref","leftAction","useBackendPagination","columns","console","log","DeleteResource","ResourceID","ID","then","res","current","fetchData","query","GetResources","useReloadButton","FormModal","itemOption","name","content","rules","required","cancel","handleOk","data","CreateResource","message","success","UpdateResource","resourceUpdate"],"mappings":"uRAiEeA,EA7DC,SAAC,GAAD,IAAGC,EAAH,EAAGA,WAAYC,EAAf,EAAeA,aAAf,MAAkC,CAChD,CACEC,MAAO,KACPC,UAAW,KACXC,IAAK,MAEP,CACEF,MAAO,eACPC,UAAW,WACXC,IAAK,YAEP,CACEF,MAAO,2BACPC,UAAW,OACXC,IAAK,QAEP,CACEF,MAAO,2BACPC,UAAW,WACXC,IAAK,YAEP,CACEF,MAAO,eACPC,UAAW,cACXC,IAAK,eAEP,CACEF,MAAO,qBACPC,UAAW,WACXC,IAAK,YAEP,CACEF,MAAO,2BACPC,UAAW,aACXC,IAAK,aACLC,OAAQ,SAACC,GAAD,OAASC,YAAWD,KAE9B,CACEJ,MAAO,eACPG,OAAQ,SAACG,GACP,OACE,8BACE,mBAAQC,KAAK,OAAOC,KAAK,QAAQC,QAAS,kBAAMX,EAAWQ,IAA3D,0BAGA,mBACEN,MAAM,mGACNU,UAAW,kBAAMX,EAAaO,IAC9BK,OAAO,eACPC,WAAW,eAJb,SAME,mBAAQL,KAAK,OAAOM,QAAM,EAACL,KAAK,QAAhC,mC,kBCvDCM,EAAsB,G,SCmBpBC,MAnBf,WAgBE,MAfgB,CACd,CACEC,MAAO,2BACPd,IAAK,OACLK,KAAM,QACNU,KAAM,GAER,CACED,MAAO,2BACPd,IAAK,WACLK,KAAM,QACNU,KAAM,KCoGGC,UAjGf,WACE,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA4CF,oBAAS,GAArD,mBAAOG,EAAP,KAAuBC,EAAvB,KACA,EAA0CJ,mBAAS,IAAnD,mBAAOK,EAAP,KAAsBC,EAAtB,KACA,EAA0BN,oBAAS,GAAnC,mBAAOO,EAAP,KAAcC,EAAd,KAEMC,EAAWC,mBAuDjB,OArDAC,qBAAU,cAAU,IAsDlB,eAAC,WAAD,WACE,mBAAMC,UAAU,SAAhB,SACE,cAACC,EAAA,EAAD,CACEC,SANS,aAOTC,OAAQnB,IACRoB,SAAU,EACVC,aAActB,MAGlB,cAACuB,EAAA,EAAD,CACEC,OAAO,KACPC,IAAKX,EACLY,WACE,mBAAQjC,KAAK,UAAUE,QAvCX,WAClBkB,GAAS,GACTN,GAAW,IAqCL,sCAIFoB,sBAAoB,EACpBC,QAAS7C,EAAQ,CAAEC,WAlDN,SAACM,GAClBuB,GAAS,GACTN,GAAW,GACXI,EAAiBrB,IA+CkBL,aA7BhB,SAACO,GACpBqC,QAAQC,IAAI,SAAUtC,GACtBuC,YAAe,CAAEC,WAAYxC,EAAOyC,KAAMC,MAAK,SAACC,GAC9CN,QAAQC,IAAI,SAAUK,GACtBrB,EAASsB,SAAWtB,EAASsB,QAAQC,kBA0BnCC,MAAOC,IACPC,iBAAe,IAEjB,cAACC,EAAA,EAAD,CACEC,WFnGwB,CAC9B,CACEC,KAAM,WACNzC,MAAO,2BACP0C,QAAS,QACTC,MAAO,CACLC,UAAU,IAGd,CACEH,KAAM,OACNzC,MAAO,2BACP0C,QAAS,SAEX,CACED,KAAM,cACNzC,MAAO,eACP0C,QAAS,aEmFLtC,QAASA,EACTyC,OAAQ,kBAAMxC,GAAW,IACzByC,SAhDW,SAAC1D,GA9BE,IAAC2D,EA+BnBpB,QAAQC,IAAI,MAAOxC,GACfsB,GAhCeqC,EAiCL3D,EAhCdmB,GAAkB,GAClByC,YAAeD,GAAMf,MAAK,WACxBzB,GAAkB,GAClB0C,EAAA,EAAQC,QAAQ,eAChB7C,GAAW,GACXO,EAASsB,SAAWtB,EAASsB,QAAQC,gBAIlB,SAACY,GACtBxC,GAAkB,GAClB4C,YAAeJ,GAAMf,MAAK,WACxBzB,GAAkB,GAClBF,GAAW,GACX4C,EAAA,EAAQC,QAAQ,kBAChBtC,EAASsB,SAAWtB,EAASsB,QAAQC,eAmBrCiB,CAAe,eACVhE,KA2CHJ,MAAO0B,EAAQ,eAAO,eACtBJ,eAAgBA,EAChBE,cAAeA","file":"static/js/18.851818a4.chunk.js","sourcesContent":["import React from \"react\";\nimport { Space, Button, Popconfirm } from \"antd\";\nimport { formatTime } from \"src/utils/common\";\n\nconst Columns = ({ handleEdit, handleDelete }) => [\n  {\n    title: \"ID\",\n    dataIndex: \"ID\",\n    key: \"ID\",\n  },\n  {\n    title: \"类型\",\n    dataIndex: \"Category\",\n    key: \"Category\",\n  },\n  {\n    title: \"资源名称\",\n    dataIndex: \"Name\",\n    key: \"Name\",\n  },\n  {\n    title: \"资源标识\",\n    dataIndex: \"Resource\",\n    key: \"Resource\",\n  },\n  {\n    title: \"描述\",\n    dataIndex: \"Description\",\n    key: \"Description\",\n  },\n  {\n    title: \"创建人\",\n    dataIndex: \"CreateBy\",\n    key: \"CreateBy\",\n  },\n  {\n    title: \"创建时间\",\n    dataIndex: \"CreateTime\",\n    key: \"CreateTime\",\n    render: (val) => formatTime(val),\n  },\n  {\n    title: \"操作\",\n    render: (record) => {\n      return (\n        <Space>\n          <Button type=\"link\" size=\"small\" onClick={() => handleEdit(record)}>\n            编辑\n          </Button>\n          <Popconfirm\n            title=\"删除后，将无法恢复，确定删除吗？\"\n            onConfirm={() => handleDelete(record)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button type=\"link\" danger size=\"small\">\n              删除\n            </Button>\n          </Popconfirm>\n        </Space>\n      );\n    },\n  },\n];\n\nexport default Columns;\n","export const filterInitialValues = {};\nexport const itemOption = () => [\n  {\n    name: \"Resource\",\n    label: \"资源标识\",\n    content: \"Input\",\n    rules: {\n      required: true,\n    },\n  },\n  {\n    name: \"Name\",\n    label: \"资源名称\",\n    content: \"Input\",\n  },\n  {\n    name: \"Description\",\n    label: \"描述\",\n    content: \"Textarea\",\n  },\n];\n","function Filter() {\n  const filters = [\n    {\n      label: \"资源名称\",\n      key: \"Name\",\n      type: \"Input\",\n      span: 8,\n    },\n    {\n      label: \"资源标识\",\n      key: \"Resource\",\n      type: \"Input\",\n      span: 8,\n    },\n  ];\n\n  return filters;\n}\n\nexport default Filter;\n","import React, { Fragment, useEffect, useState, useRef } from \"react\";\nimport UTable from \"src/components/UTable\";\nimport Columns from \"./Columns\";\nimport FormModal from \"src/components/UForm/FormModal\";\nimport { Button, message, Card } from \"antd\";\nimport {\n  GetResources,\n  CreateResource,\n  UpdateResource,\n  DeleteResource,\n} from \"src/api/acl\";\nimport { itemOption, filterInitialValues } from \"./FormItem\";\nimport TableFilter from \"src/components/TableFilter\";\nimport Filter from \"./Filter\";\n\nfunction Resource() {\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n  const [initialValues, setInitialValues] = useState({});\n  const [isNew, setIsNew] = useState(true);\n\n  const tableRef = useRef();\n\n  useEffect(() => {}, []);\n\n  const resourceAdd = (data) => {\n    setConfirmLoading(true);\n    CreateResource(data).then(() => {\n      setConfirmLoading(false);\n      message.success(\"add success\");\n      setVisible(false);\n      tableRef.current && tableRef.current.fetchData();\n    });\n  };\n\n  const resourceUpdate = (data) => {\n    setConfirmLoading(true);\n    UpdateResource(data).then(() => {\n      setConfirmLoading(false);\n      setVisible(false);\n      message.success(\"update success\");\n      tableRef.current && tableRef.current.fetchData();\n    });\n  };\n\n  const handleEdit = (val) => {\n    setIsNew(false);\n    setVisible(true);\n    setInitialValues(val);\n  };\n\n  const handleClick = () => {\n    setIsNew(true);\n    setVisible(true);\n  };\n  const handleOk = (val) => {\n    console.log(\"val\", val);\n    if (isNew) {\n      resourceAdd(val);\n    } else {\n      resourceUpdate({\n        ...val,\n      });\n    }\n  };\n\n  const handleDelete = (record) => {\n    console.log(\"delete\", record);\n    DeleteResource({ ResourceID: record.ID }).then((res) => {\n      console.log(\"delete\", res);\n      tableRef.current && tableRef.current.fetchData();\n    });\n  };\n\n  const onSearch = () => {};\n\n  return (\n    <Fragment>\n      <Card className=\"m-b-10\">\n        <TableFilter\n          onSearch={onSearch}\n          fields={Filter()}\n          rowCount={3}\n          defaultValue={filterInitialValues}\n        />\n      </Card>\n      <UTable\n        rowKey=\"ID\"\n        ref={tableRef}\n        leftAction={\n          <Button type=\"primary\" onClick={handleClick}>\n            添加资源\n          </Button>\n        }\n        useBackendPagination\n        columns={Columns({ handleEdit, handleDelete })}\n        query={GetResources}\n        useReloadButton\n      />\n      <FormModal\n        itemOption={itemOption()}\n        visible={visible}\n        cancel={() => setVisible(false)}\n        handleOk={handleOk}\n        title={isNew ? \"新增\" : \"编辑\"}\n        confirmLoading={confirmLoading}\n        initialValues={initialValues}\n      />\n    </Fragment>\n  );\n}\n\nexport default Resource;\n"],"sourceRoot":""}