{"version":3,"sources":["utils/download.js","utils/localStorage.js","components/UTable/index.js","api/request.js","api/acl.js","components/UForm/FormItem.js","components/UForm/FormModal.js","components/Form/FormItemComponent.js","components/TableFilter/index.js","pages/system/Role/Columns.js","pages/system/Role/FormItem.js","pages/system/Role/Filter.js","pages/system/Role/index.js"],"names":["a","fields","dataSource","filename","download","csv","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","href","click","revokeObjectURL","err","console","error","Parser","withBOM","parse","exportCSV","getLocalStorage","key","value","localStorage","getItem","JSON","e","CheckboxGroup","Group","UTable","forwardRef","props","ref","columns","storeKey","rowKey","query","leftAction","filterParams","size","useBackendPagination","useBackendSearch","useReloadButton","useSearchInput","limit","exportData","exportQuery","useState","Data","setData","total","setTotal","loading","setLoading","exportLoading","setExportLoading","tableColumns","setTableColumns","undefined","FuzzySearch","setFuzzySearch","Page","PageSize","pagination","setPagination","useEffect","fetchData","toQueryParams","useCallback","data","log","then","res","Total","catch","defaultColumns","storeColumns","filter","item","includes","useImperativeHandle","sortField","sorter","field","sortOrder","order","filters","throttleRef","current","handleDownload","exportPromise","message","String","Array","isArray","length","onChange","useRef","throttle","fetchCondition","onSearch","tableProps","Object","keys","some","k","pageSize","scroll","x","ColumnsSettingContent","style","width","options","map","label","title","values","selectedColumns","setItem","stringify","setLocalStorage","column","CardExtra","suffix","SearchOutlined","onClick","target","placeholder","onPressEnter","icon","DownloadOutlined","ReloadOutlined","placement","content","trigger","SettingOutlined","extra","bordered","defaultProps","usePagination","displayName","config","baseURL","process","REACT_APP_API","userInfo","request","params","Promise","resolve","reject","instance","axios","create","assign","withCredentials","timeout","interceptors","use","headers","token","remote_user","response","RetCode","Message","location","replace","CreateResource","method","UpdateResource","GetResources","DeleteResource","GetUserList","CreateUser","UpdateUser","DeleteUser","GetRoleList","Option","FormItem","option","render","rest","filterItem","Input","Textarea","TextArea","Select","showSearch","optionFilterProp","filterOption","input","children","toLowerCase","indexOf","list","index","SelectNew","defaultLayout","labelCol","span","wrapperCol","FormModal","itemOption","visible","cancel","handleOk","initialValues","confirmLoading","layout","editInfo","useForm","form","resetFields","forceRender","onOk","validateFields","onCancel","Item","name","rules","RangePicker","FormItemComponent","disabled","NumberInput","allowClear","SelectMultiple","mode","Radio","optionType","buttonStyle","Date","DateRange","Content","TableFilter","rowCount","defaultValue","leftActions","rightActions","defaultExpand","count","expand","setExpand","setFieldsValue","onFinish","forEach","prototype","isPrototypeOf","gutter","showFields","slice","hidden","push","required","getFields","className","htmlType","padding","UpOutlined","DownOutlined","Columns","handleEdit","dataIndex","val","formatTime","record","filterInitialValues","rewritePermissions","targetKeys","handleChange","titles","listStyle","height","Filter","Role","resource","setResource","setVisible","setConfirmLoading","setTargetKeys","selectedKeys","setSelectedKeys","isNew","setIsNew","setInitialValues","getResource","getRoleById","id","resourceIds","resourceList","resourceId","getResourceName","category","nameCn","nextTargetKeys","onSelectChange","sourceSelectedKeys","targetSelectedKeys"],"mappings":"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","file":"static/js/10.91343927.chunk.js","sourcesContent":["/**\n * @function exportCSV\n * @description 下载csv文件\n * @param {Array} fields 表头字段\n * @param {Array} dataSource 文件数据\n * @param {String} filename 文件名\n */\n\nasync function exportCSV({\n  fields = [],\n  dataSource = [],\n  filename = \"download\",\n}) {\n  const download = (csv) => {\n    try {\n      const blob = new Blob([csv, { type: \"text/csv\" }]);\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = filename;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  try {\n    const { Parser } = await import(\"json2csv\");\n    const csv = new Parser({ fields, withBOM: true }).parse(dataSource);\n    download(csv);\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nexport default exportCSV;\n","export function setLocalStorage(key, value) {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n\nexport function getLocalStorage(key) {\n  const value = window.localStorage.getItem(key);\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    return value;\n  }\n}\n\n// 获取某个系统缓存数据，包括用户信息\nexport function getOneSystemStore(key) {\n  return getLocalStorage(key);\n}\n\n// 获取系统缓存数据，包括用户信息\nexport function getSystemStore(keys) {\n  const systemStore = {};\n  Object.keys(keys).forEach((item) => {\n    systemStore[item] = getLocalStorage(keys[item]);\n  });\n\n  return systemStore;\n}\n","import React, {\n  useState,\n  useEffect,\n  useImperativeHandle,\n  forwardRef,\n  useCallback,\n  useRef,\n} from \"react\";\nimport {\n  ReloadOutlined,\n  DownloadOutlined,\n  SearchOutlined,\n  SettingOutlined,\n} from \"@ant-design/icons\";\nimport {\n  Card,\n  Table,\n  Button,\n  Space,\n  Input,\n  message,\n  Checkbox,\n  Tooltip,\n  Popover,\n} from \"antd\";\nimport PropTypes from \"prop-types\";\n\nimport exportCSV from \"../../utils/download\";\nimport { throttle } from \"../../utils/common\";\nimport { getLocalStorage, setLocalStorage } from \"src/utils/localStorage\";\n\nconst CheckboxGroup = Checkbox.Group;\n\nconst DefaultPageSize = 9999999;\n\nconst UTable = forwardRef((props, ref) => {\n  const {\n    columns,\n    storeKey,\n    dataSource,\n    rowKey,\n    query,\n    leftAction,\n    download,\n    filterParams,\n    size,\n    useBackendPagination,\n    useBackendSearch,\n    useReloadButton,\n    useSearchInput,\n  } = props;\n\n  const { limit, exportData, exportQuery } = download || {};\n\n  const [Data, setData] = useState(dataSource || []);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [exportLoading, setExportLoading] = useState(false);\n  const [tableColumns, setTableColumns] = useState([]);\n  const [FuzzySearch, setFuzzySearch] = useState(undefined);\n  const [pagination, setPagination] = useState({\n    Page: 1,\n    PageSize: 10,\n  });\n\n  useEffect(() => {\n    fetchData({ ...toQueryParams() });\n  }, []);\n\n  const fetchData = useCallback(\n    async (data) => {\n      console.log(\"fetchData\", data);\n\n      setLoading(true);\n      return (\n        query &&\n        query(data)\n          .then((res) => {\n            const { Data, Total } = res || {};\n            setData(Data || []);\n            setTotal(Total || 0);\n            setLoading(false);\n            return Data;\n          })\n          .catch((err) => {\n            setLoading(false);\n            return err;\n          })\n      );\n    },\n    [query]\n  );\n\n  useEffect(() => {\n    const defaultColumns = columns;\n    const storeColumns = getLocalStorage(storeKey);\n\n    if (storeColumns) {\n      setTableColumns(\n        columns.filter((item) => (storeColumns || []).includes(item.key))\n      );\n      return;\n    }\n\n    setTableColumns(defaultColumns);\n    // eslint-disable-next-line\n  }, [columns]);\n\n  // 暴露接口调用和表格数据给父组件\n  useImperativeHandle(\n    ref,\n    () => ({\n      fetchData: () => fetchData({ ...toQueryParams() }),\n      data: Data,\n    }),\n    [Data, fetchData]\n  );\n\n  const toQueryParams = useCallback(\n    (data) => {\n      const { Page, PageSize, FuzzySearch } = pagination;\n      return {\n        ...(useBackendPagination\n          ? {\n              Page: data?.Page || Page,\n              PageSize: data?.PageSize || PageSize,\n              FuzzySearch: data?.FuzzySearch || FuzzySearch,\n              sortField: data?.sorter?.field,\n              sortOrder: data?.sorter?.order,\n              ...(data?.filters ? data.filters : {}),\n              ...filterParams,\n            }\n          : {\n              Page: 1,\n              PageSize: DefaultPageSize,\n              ...filterParams,\n            }),\n      };\n    },\n    [filterParams, pagination, useBackendPagination]\n  );\n\n  useEffect(() => {\n    // 外部搜索\n    console.log(throttleRef.current);\n    throttleRef.current(\n      pagination.Page,\n      pagination.PageSize || 10,\n      useBackendPagination\n    );\n  }, [filterParams]);\n\n  const handleDownload = async () => {\n    let dataSource = Data;\n    if (useBackendPagination) {\n      setExportLoading(true);\n      const exportPromise = exportQuery\n        ? exportQuery({\n            ...toQueryParams(),\n          })\n        : query({\n            ...toQueryParams(),\n            Page: 1,\n            ...(limit ? { PageSize: limit } : {}),\n          });\n      dataSource = await exportPromise\n        .then((res) => res.Data)\n        .catch((err) => {\n          setExportLoading(false);\n          message.error(String(err));\n          return null;\n        });\n      setExportLoading(false);\n    }\n    if (Array.isArray(dataSource) && dataSource.length) {\n      const { data, fields } = exportData(dataSource);\n      exportCSV({ fields, dataSource: data, filename: \"list.csv\" });\n    }\n  };\n\n  // 分页切换\n  const onChange = useCallback((Page, PageSize, pagination) => {\n    setPagination({ ...pagination, Page, PageSize });\n    if (useBackendPagination) {\n      fetchData({ FuzzySearch, Page, PageSize });\n    }\n  }, []);\n\n  const getList = (Page, PageSize, fetchCondition) => {\n    setPagination({ Page, PageSize });\n    if (fetchCondition) {\n      fetchData({ FuzzySearch, Page, PageSize });\n    }\n  };\n\n  const throttleRef = useRef(throttle(getList, 1000));\n\n  // 自带搜索\n  const onSearch = () => {\n    if (!useBackendSearch) {\n      return;\n    }\n    // 后端分页查询\n    const page = 1;\n    throttleRef.current(page, pagination.PageSize || 10, useBackendPagination);\n  };\n\n  const handleTableChange = (pagination, filters, sorter) => {\n    console.log(sorter);\n    fetchData({ ...toQueryParams({ pagination, filters, sorter }) });\n  };\n\n  const tableProps = useCallback(() => {\n    return {\n      dataSource:\n        useBackendPagination && useBackendSearch\n          ? Data\n          : Data?.filter(\n              (item) =>\n                !FuzzySearch ||\n                Object.keys(item).some((k) => {\n                  return (\n                    typeof item[k] !== Object &&\n                    String(item[k]).includes(FuzzySearch)\n                  );\n                })\n            ),\n      ...(useBackendPagination\n        ? {\n            pagination: {\n              current: pagination.Page,\n              pageSize: pagination.PageSize,\n              total: total,\n              onChange: (Page, PageSize) =>\n                onChange(Page, PageSize, pagination),\n            },\n          }\n        : {}),\n      scroll: { x: true },\n    };\n  }, [\n    Data,\n    FuzzySearch,\n    total,\n    useBackendPagination,\n    useBackendSearch,\n    pagination,\n    onChange,\n  ]);\n\n  const ColumnsSettingContent = (\n    <CheckboxGroup\n      style={{ width: 150 }}\n      options={columns.map((item) => ({ label: item.title, value: item.key }))}\n      value={tableColumns.map((item) => item.key)}\n      onChange={(values) => {\n        const selectedColumns = columns.filter((item) =>\n          values.includes(item.key)\n        );\n        setTableColumns(selectedColumns);\n        if (storeKey) {\n          setLocalStorage(\n            storeKey,\n            selectedColumns.map((column) => column.key)\n          );\n        }\n      }}\n    />\n  );\n\n  const CardExtra = (\n    <Space>\n      {useSearchInput ? (\n        <Input\n          size={size}\n          suffix={<SearchOutlined onClick={onSearch} />}\n          value={FuzzySearch}\n          onChange={(e) => setFuzzySearch(e.target.value)}\n          placeholder=\"search...\"\n          onPressEnter={onSearch}\n        />\n      ) : null}\n\n      {download && (\n        <Button\n          size={size}\n          loading={exportLoading}\n          onClick={handleDownload}\n          icon={<DownloadOutlined />}\n        ></Button>\n      )}\n\n      {useReloadButton ? (\n        <Button\n          size={size}\n          onClick={() => fetchData({ ...toQueryParams() })}\n          icon={<ReloadOutlined />}\n        ></Button>\n      ) : null}\n\n      {storeKey && (\n        <Tooltip key={\"ColumnsSetting\"} placement=\"top\" title=\"自定义列表\">\n          <Popover\n            placement=\"left\"\n            title=\"自定义列表\"\n            content={ColumnsSettingContent}\n            trigger=\"click\"\n          >\n            <Button size={size} icon={<SettingOutlined />} />\n          </Popover>\n        </Tooltip>\n      )}\n    </Space>\n  );\n\n  return (\n    <Card size={size} title={leftAction} extra={CardExtra}>\n      <Table\n        size={size}\n        columns={tableColumns}\n        rowKey={rowKey}\n        loading={loading}\n        bordered\n        onChange={handleTableChange}\n        {...tableProps()}\n      />\n    </Card>\n  );\n});\n\nUTable.defaultProps = {\n  usePagination: false,\n  size: \"middle\",\n  useBackendSearch: false,\n};\n\nUTable.propTypes = {\n  download: PropTypes.shape({\n    limit: PropTypes.number,\n    exportData: PropTypes.func,\n    exportQuery: PropTypes.func, // 下载是否为单独的接口\n    ResponseDataKey: PropTypes.string, // 接口返回数据的key\n    ResponseTotalKey: PropTypes.string, // 接口返回Total参数名\n  }),\n  pagination: PropTypes.object,\n  useBackendPagination: PropTypes.bool, // 是否使用后端分页\n  //   filter: PropTypes.object, // 过滤参数\n  query: PropTypes.func, // 请求API\n  columns: PropTypes.array.isRequired, // 标题数据\n  storeKey: PropTypes.string, // 储存动态展示列的localStorage的key\n  useReloadButton: PropTypes.bool, // 刷新表格按钮\n  leftAction: PropTypes.any, // 表格头部左侧按钮操作\n  filterParams: PropTypes.object,\n  size: PropTypes.oneOf([\"small\", \"large\", \"middle\"]),\n  useBackendSearch: PropTypes.bool, // 是否使用后端搜索\n  useSearchInput: PropTypes.bool,\n  dataSource: PropTypes.array,\n  rowKey: PropTypes.string,\n  onChange: PropTypes.func, // Table原生的change\n};\n\nUTable.displayName = \"UTable\";\n\nexport default UTable;\n","import { message } from \"antd\";\nimport axios from \"axios\";\n\nconst config = {};\nif (process.env.REACT_APP_ENV !== \"development\") {\n  config.baseURL = process.env.REACT_APP_API;\n}\n\nconst userInfo = {\n  username: \"user\",\n  token: \"123456\",\n};\n\nfunction request(params) {\n  return new Promise((resolve, reject) => {\n    const instance = axios.create(\n      Object.assign(\n        {\n          withCredentials: false,\n          \"content-type\": \"application/json\",\n          timeout: 30000,\n        },\n        config\n      )\n    );\n\n    instance.interceptors.request.use(\n      (config) => {\n        if (userInfo.token) {\n          config.headers.token = userInfo.token;\n        }\n        if (userInfo.username) {\n          config.headers.remote_user = userInfo.username;\n        }\n        return config;\n      },\n      (err) => {\n        return reject(err);\n      }\n    );\n\n    instance.interceptors.response.use(\n      (res) => {\n        return res;\n      },\n      (err) => {\n        return reject(err.message);\n      }\n    );\n\n    instance(params)\n      .then((res) => {\n        const {\n          data: { RetCode, Message },\n          data,\n        } = res;\n        if (RetCode === 10000) {\n          message.error(\"请登陆\");\n          window.location.replace(\"/login\");\n          return;\n        } else if (RetCode !== 0) {\n          message.error(Message);\n          resolve(data);\n        } else {\n          resolve(data);\n        }\n      })\n      .catch((err) => {\n        reject(err);\n      });\n  });\n}\n\nexport default request;\n","import request from \"./request\";\n// resource\nexport const CreateResource = (data) => {\n  return request({\n    url: \"/v1/signIn\",\n    method: \"post\",\n    data,\n  });\n};\n\nexport const test = () => {};\n\nexport const UpdateResource = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\nexport const GetResources = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\nexport const DeleteResource = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\n\nexport const GetUserList = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\nexport const CreateUser = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\nexport const UpdateUser = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\nexport const DeleteUser = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\n\nexport const GetRoleList = (query) => {\n  return request({\n    url: \"/v1/list\",\n    method: \"get\",\n    query,\n  });\n};\n","import React from \"react\";\nimport { Input, Select } from \"antd\";\n\nconst { Option } = Select;\n\nfunction FormItem(field) {\n  const { content, label, option, render, ...rest } = field;\n\n  const filterItem = {\n    Input: <Input placeholder=\"请输入\" />,\n    Textarea: (\n      <Input.TextArea\n        style={{ width: \"100%\" }}\n        placeholder={label}\n        {...option}\n      />\n    ),\n    Select: (\n      <Select\n        showSearch\n        {...rest}\n        optionFilterProp=\"children\"\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {option && option.list\n          ? option.list.map((item, index) => {\n              const label = Array.isArray(option.label)\n                ? `${item[option.label[0]]}（${item[option.label[1]]}）`\n                : item[option.label];\n              return (\n                <Option key={index} value={item[option.value]} label={label}>\n                  {label}\n                </Option>\n              );\n            })\n          : null}\n      </Select>\n    ),\n    SelectNew: (\n      <Select\n        showSearch\n        style={{ width: 200 }}\n        {...rest}\n        optionFilterProp=\"children\"\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {option && option.list\n          ? option.list.map((item, index) => {\n              return (\n                <Option key={index} value={item.value} label={item.label}>\n                  {item.label}\n                </Option>\n              );\n            })\n          : null}\n      </Select>\n    ),\n  };\n  return render || filterItem[content];\n}\n\nexport default FormItem;\n","import React, { Fragment, useEffect } from \"react\";\nimport { Modal, Form } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\n\nconst defaultLayout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 16 },\n};\n\nfunction FormModal(props) {\n  const {\n    itemOption,\n    title,\n    visible,\n    cancel,\n    handleOk,\n    initialValues,\n    confirmLoading,\n    width,\n    layout,\n    editInfo,\n    rest,\n  } = props;\n  const [form] = Form.useForm();\n\n  useEffect(() => {\n    if (editInfo) {\n      console.log(\"editInfo\", editInfo);\n    }\n    return () => {\n      form.resetFields();\n    };\n  }, [visible, form, editInfo]);\n\n  const confirm = () => {\n    form\n      .validateFields()\n      .then((values) => {\n        handleOk(values);\n      })\n      .catch((err) => {\n        console.log(\"err\", err);\n      });\n  };\n\n  return (\n    <Fragment>\n      <Modal\n        forceRender\n        title={\n          title ||\n          (editInfo && Object.keys(editInfo).length === 0 ? \"新增\" : \"编辑\")\n        }\n        visible={visible}\n        onOk={confirm}\n        onCancel={cancel}\n        width={width}\n        confirmLoading={confirmLoading}\n        {...rest}\n      >\n        <Form\n          form={form}\n          {...(layout ? layout : defaultLayout)}\n          initialValues={initialValues}\n        >\n          {itemOption\n            ? itemOption.map((item, index) => {\n                return (\n                  <Form.Item\n                    key={index}\n                    label={item.label}\n                    name={item.name}\n                    rules={[{ ...item.rules }]}\n                  >\n                    {FormItem(item)}\n                  </Form.Item>\n                );\n              })\n            : null}\n        </Form>\n      </Modal>\n    </Fragment>\n  );\n}\n\nFormModal.propTypes = {\n  itemOption: PropTypes.array.isRequired,\n  handleOk: PropTypes.func.isRequired,\n  visible: PropTypes.bool,\n  title: PropTypes.string,\n  cancel: PropTypes.func,\n  initialValues: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  confirmLoading: PropTypes.bool,\n  leftAction: PropTypes.element,\n  rest: PropTypes.object,\n  layout: PropTypes.object,\n  editInfo: PropTypes.object,\n};\n\nexport default FormModal;\n","import React from \"react\";\nimport { Input, InputNumber, Select, DatePicker, Radio } from \"antd\";\n\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\n\n/**\n *  表单弹窗 \n * @param ItemOptions 表单配置\n * ItemOptions = {\n    label: \"标题\",\n    name: \"字段名\",\n    required: \"必填-boolean\",\n    content: \"表单\",\n    hidden: \"隐藏-boolean\",\n    title: \"作为文本标题展示-boolean\"\n * }\n * @param initialValues 表单整体的默认值，不再使用单个表单默认值\n * */\nexport default function FormItemComponent(field) {\n  // 选项的类型：Input-输入框，NumberInput-数字输入框，Select-下拉框，SelectMultiple-下拉框多选，\n  // Date-日期，DateRange-日期范围，DateRangeButton-日期范围按钮\n  const filterItem = {\n    Input: (\n      <Input\n        style={{ width: \"100%\" }}\n        placeholder={field.placeholder || field.label}\n        disabled={field.disabled}\n      />\n    ),\n    TextArea: (\n      <Input.TextArea\n        style={{ width: \"100%\" }}\n        placeholder={field.label}\n        {...field.option}\n      />\n    ),\n    NumberInput: (\n      <InputNumber style={{ width: \"100%\" }} placeholder={field.label} />\n    ),\n    Select: (\n      <Select\n        style={{ width: \"100%\" }}\n        placeholder={field.label}\n        showSearch={true}\n        allowClear={true}\n        disabled={field.disabled || false}\n        filterOption={(input, option) => {\n          try {\n            return (\n              option.props.children\n                .toLowerCase()\n                .indexOf(input.toLowerCase()) >= 0\n            );\n          } catch {\n            return option.props.children.indexOf(input) >= 0;\n          }\n        }}\n      >\n        {field.options\n          ? field.options.map((item, index) => {\n              return (\n                <Option key={index} value={item.value}>\n                  {item.name || item.label}\n                </Option>\n              );\n            })\n          : null}\n      </Select>\n    ),\n    SelectMultiple: (\n      <Select\n        style={{ width: \"100%\" }}\n        mode=\"multiple\"\n        allowClear={true}\n        placeholder={field.label}\n        filterOption={(input, option) => {\n          try {\n            return (\n              option.props.children\n                .toLowerCase()\n                .indexOf(input.toLowerCase()) >= 0\n            );\n          } catch {\n            return option.props.children.indexOf(input) >= 0;\n          }\n        }}\n      >\n        {field.options\n          ? field.options.map((item, index) => {\n              return (\n                <Option key={index} value={item.value}>\n                  {item.name || item.label}\n                </Option>\n              );\n            })\n          : null}\n      </Select>\n    ),\n    Radio: (\n      <Radio.Group\n        options={field.options}\n        optionType=\"button\"\n        buttonStyle=\"solid\"\n        {...field.option}\n      />\n    ),\n    Date: <DatePicker {...field.option} />,\n    DateRange: <RangePicker {...field.option} />,\n    Content: field.content,\n  };\n\n  return field.content || filterItem[field.type];\n}\n","import React, { useState, useEffect, Fragment } from \"react\";\nimport \"./index.less\";\nimport { Form, Button, Col, Row, Space } from \"antd\";\nimport { DownOutlined, UpOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport FormItemComponent from \"../Form/FormItemComponent.js\";\n\nexport const resetObjectSelect = (object) => {\n  return Object.keys(object).map((item) => ({\n    label: object[item],\n    value: item,\n  }));\n};\n\n/**\n * 表格过滤器封装\n * @param fields 过滤器配置\n * @param rowCount 首行展示过滤key数量\n * @param defaultValue 默认值，受控\n * @param leftActions 左浮按钮\n * @param rightActions 右浮按钮\n * @function onSearch 回调函数，点击搜索时触发\n */\n\nfunction TableFilter(props) {\n  const {\n    fields,\n    onSearch,\n    rowCount,\n    defaultValue,\n    leftActions,\n    rightActions,\n    defaultExpand,\n  } = props;\n\n  const [form] = Form.useForm();\n\n  const defaultCount = 4;\n  const count = rowCount ? rowCount : defaultCount;\n\n  const [expand, setExpand] = useState(() =>\n    defaultExpand ? defaultExpand : false\n  );\n\n  useEffect(() => {\n    if (defaultValue) {\n      form.setFieldsValue(defaultValue);\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  const getFields = () => {\n    const showFields = expand ? fields : fields.slice(0, count);\n    const children = [];\n    showFields.forEach((item) => {\n      if (!item.hidden) {\n        children.push(\n          <Col span={item.span ? item.span : 6} key={item.key}>\n            <Form.Item\n              name={item.key}\n              label={item.label}\n              required={item.required}\n            >\n              {FormItemComponent(item)}\n            </Form.Item>\n          </Col>\n        );\n      }\n    });\n    return children;\n  };\n\n  const onFinish = (values) => {\n    // 剔除空数据、空数组、空对象\n    const data = { ...values };\n    Object.keys(data).forEach((item) => {\n      if (\n        data[item] === \"\" ||\n        // eslint-disable-next-line no-prototype-builtins\n        (Array.prototype.isPrototypeOf(data[item]) &&\n          data[item].length === 0) ||\n        // eslint-disable-next-line no-prototype-builtins\n        (Object.prototype.isPrototypeOf(data[item]) &&\n          Object.keys(data[item]).length === 0)\n      ) {\n        delete data[item];\n      }\n    });\n    onSearch(data);\n  };\n\n  return (\n    <Form form={form} name=\"advanced_search\" onFinish={onFinish}>\n      {fields && fields.length > 0 && <Row gutter={24}>{getFields()}</Row>}\n      <Row>\n        <Col span={14}>\n          {leftActions\n            ? leftActions.map((item, index) => (\n                <Fragment key={index}>{item}</Fragment>\n              ))\n            : null}\n        </Col>\n        <Col span={10} className=\"table-filter-col\">\n          {fields && fields.length > 0 && (\n            <Space className=\"table-filter-button-group\">\n              <Button type=\"primary\" htmlType=\"submit\" size=\"small\">\n                搜索\n              </Button>\n              <Button\n                size=\"small\"\n                onClick={() => {\n                  form.resetFields();\n                  form.setFieldsValue(defaultValue);\n                }}\n              >\n                重置\n              </Button>\n              {fields && fields.length > count ? (\n                <Button\n                  type=\"link\"\n                  style={{ padding: 0 }}\n                  onClick={() => {\n                    setExpand(!expand);\n                  }}\n                >\n                  {expand ? <UpOutlined /> : <DownOutlined />} 更多\n                </Button>\n              ) : null}\n            </Space>\n          )}\n          {rightActions\n            ? rightActions.map((item, index) => <span key={index}>{item}</span>)\n            : null}\n        </Col>\n      </Row>\n    </Form>\n  );\n}\n\nTableFilter.propTypes = {\n  fields: PropTypes.array,\n  onSearch: PropTypes.func,\n  rowCount: PropTypes.number,\n  defaultValue: PropTypes.object,\n  leftActions: PropTypes.element,\n  rightActions: PropTypes.element,\n  defaultExpand: PropTypes.bool,\n};\n\nexport default TableFilter;\n","import React from \"react\";\nimport { Space, Button } from \"antd\";\nimport { formatTime } from \"src/utils/common\";\n\nconst Columns = ({ handleEdit }) => [\n  {\n    title: \"ID\",\n    dataIndex: \"ID\",\n    key: \"ID\",\n  },\n  {\n    title: \"名称\",\n    dataIndex: \"Name\",\n    key: \"Name\",\n  },\n  {\n    title: \"标识\",\n    dataIndex: \"Role\",\n    key: \"Role\",\n  },\n  {\n    title: \"说明\",\n    dataIndex: \"Description\",\n    key: \"Description\",\n  },\n  {\n    title: \"创建人\",\n    dataIndex: \"createdBy\",\n    key: \"createdBy\",\n    render: (val) => (val ? val : \"-\"),\n  },\n  {\n    title: \"创建时间\",\n    dataIndex: \"CreateTime\",\n    key: \"CreateTime\",\n    render: (val) => formatTime(val),\n  },\n  {\n    title: \"操作\",\n    render: (record) => {\n      return (\n        <Space>\n          <Button type=\"link\" size=\"small\" onClick={() => handleEdit(record)}>\n            编辑\n          </Button>\n        </Space>\n      );\n    },\n  },\n];\n\nexport default Columns;\n","import React from \"react\";\nimport { Transfer } from \"antd\";\n\nexport const filterInitialValues = {};\nexport const itemOption = ({\n  rewritePermissions,\n  targetKeys,\n  handleChange,\n}) => [\n  {\n    name: \"nameCn\",\n    label: \"角色名称\",\n    content: \"Input\",\n    rules: {\n      required: true,\n    },\n  },\n  {\n    name: \"name\",\n    label: \"角色标识\",\n    content: \"Input\",\n    rules: {\n      required: true,\n    },\n  },\n  {\n    name: \"describe\",\n    label: \"描述\",\n    content: \"Textarea\",\n  },\n  {\n    name: \"resourceIds\",\n    label: \"资源\",\n    rules: {\n      required: true,\n    },\n    render: (\n      <Transfer\n        dataSource={rewritePermissions}\n        titles={[\"待赋权列表\", \"已赋权列表\"]}\n        targetKeys={targetKeys}\n        render={(item) => item.name}\n        showSearch\n        onChange={handleChange}\n        listStyle={{\n          width: 250,\n          height: 250,\n        }}\n      />\n    ),\n  },\n];\n","function Filter() {\n  const filters = [\n    {\n      label: \"名称\",\n      key: \"Name\",\n      type: \"Input\",\n      span: 8,\n    },\n    {\n      label: \"资源标识\",\n      key: \"Role\",\n      type: \"Input\",\n      span: 8,\n    },\n  ];\n\n  return filters;\n}\n\nexport default Filter;\n","import React, { Fragment, useState, useEffect } from \"react\";\nimport Columns from \"./Columns\";\nimport UTable from \"src/components/UTable\";\nimport FormModal from \"src/components/UForm/FormModal\";\nimport { Button, Card } from \"antd\";\nimport { GetRoleList } from \"src/api/acl\";\nimport { itemOption, filterInitialValues } from \"./FormItem\";\nimport TableFilter from \"src/components/TableFilter\";\nimport Filter from \"./Filter\";\n\nfunction Role() {\n  const [resource, setResource] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n  const [targetKeys, setTargetKeys] = useState([]);\n  const [selectedKeys, setSelectedKeys] = useState([]);\n  const [isNew, setIsNew] = useState(true);\n  const [initialValues, setInitialValues] = useState({});\n\n  useEffect(() => {\n    getResource();\n  }, []);\n\n  useEffect(() => {\n    if (visible) {\n      setSelectedKeys([]);\n    }\n  }, [visible]);\n\n  const handleEdit = async (record) => {\n    try {\n      const res = await getRoleById(record.id);\n      const resourceIds = res.resourceList.map((item) => item.resourceId);\n      setTargetKeys(resourceIds);\n      // setSelectedKeys(resourceListId)\n      setIsNew(false);\n      setInitialValues({ ...record, resourceIds });\n      setVisible(true);\n    } catch (err) {\n      console.log(\"err\", err);\n    }\n  };\n\n  const getResource = () => {\n    setLoading(true);\n    setResource([]);\n    // Api.GetAllResource()\n    // .then((res) => {\n    // const { rows } = res.Data;\n    // setResource(rows);\n    // setLoading(false);\n    // })\n    // .catch((err) => {\n    // console.log(\"err\", err);\n    // });\n  };\n\n  // const categoryMapInfo = {\n  // acl: '权限管理',\n  // backend: '接口',\n  // operation: '操作权限',\n  // menu: '目录'\n  // };\n\n  const getResourceName = ({ category, nameCn }) => {\n    return category ? `${nameCn}` : nameCn;\n  };\n\n  const rewritePermissions = resource.map((x) => {\n    return {\n      key: x.id,\n      name: getResourceName(x),\n    };\n  });\n  const getRoleById = () => {\n    // return Api.getRoleById(id).then((res) => {\n    // if (res.RetCode === 0) {\n    // return res.Data;\n    // } else {\n    // return {};\n    // }\n    // });\n  };\n\n  const addRole = () => {\n    setConfirmLoading(true);\n    // Api.createRoles(data).then((res) => {\n    // setConfirmLoading(false);\n    // setVisible(false);\n    // getRole();\n    // });\n  };\n\n  const updateRole = () => {\n    setConfirmLoading(true);\n    // Api.updateRoles(data).then((res) => {\n    // setConfirmLoading(false);\n    // setVisible(false);\n    // getRole();\n    // });\n  };\n\n  const handleOk = (val) => {\n    if (isNew) {\n      addRole(val);\n    } else {\n      val.id = initialValues.id;\n      updateRole(val);\n    }\n  };\n\n  const handleChange = (nextTargetKeys) => {\n    setTargetKeys(nextTargetKeys);\n  };\n\n  const onSelectChange = (sourceSelectedKeys, targetSelectedKeys) => {\n    setSelectedKeys([...sourceSelectedKeys, ...targetSelectedKeys]);\n  };\n\n  const createUser = () => {\n    setVisible(true);\n  };\n\n  const onSearch = () => {};\n\n  return (\n    <Fragment>\n      <Card className=\"m-b-10\">\n        <TableFilter\n          onSearch={onSearch}\n          fields={Filter()}\n          rowCount={3}\n          defaultValue={filterInitialValues}\n        />\n      </Card>\n      <UTable\n        rowKey=\"ID\"\n        columns={Columns({ handleEdit })}\n        useReloadButton\n        leftAction={\n          <Button type=\"primary\" onClick={createUser}>\n            创建角色\n          </Button>\n        }\n        useBackendPagination\n        query={GetRoleList}\n        loading={loading}\n      />\n      <FormModal\n        width={800}\n        itemOption={itemOption({\n          targetKeys,\n          rewritePermissions,\n          handleChange,\n        })}\n        visible={visible}\n        cancel={() => setVisible(false)}\n        handleOk={handleOk}\n        title={isNew ? \"新增\" : \"编辑\"}\n        isNew={isNew}\n        confirmLoading={confirmLoading}\n        onSelectChange={onSelectChange}\n        selectedKeys={selectedKeys}\n        initialValues={initialValues}\n      />\n    </Fragment>\n  );\n}\n\nexport default Role;\n"],"sourceRoot":""}